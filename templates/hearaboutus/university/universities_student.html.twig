{% extends 'base.html.twig' %}

{% block body %}
</br></br>
 <section class="section section-lg">
      <img src="{{asset('assetss/img/path4.png')}}" class="path">
      
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-12">
            <h1 class="text-center">Newest Universities</h1>
            <div class="row row-grid justify-content-center">
            
            </div>
          </div>
        </div>
      </div>
 </section>


<div class="section">
{% set i=1%}
<div class="row">
{% for university in new if i<3 %}
          <div class="container">
            
            
            <div class="row justify-content-between align-items-center">
              <div class="col-lg-5 mb-5 mb-lg-0 ">
                <h1 class="text-white font-weight-light">{{ university.title }}</h1>
                <p class="text-white mt-4">Black Design comes with three pre-built pages to help you get started faster. You can change the text and images and you're good to go.{{ university.description }}</p>
                Students number:<p class=" text-info mt-2">{{ university.studentsnumber}}</p>
                <a href="{{path('university_show',{'id':university.id})}}" class="btn btn-danger mt-4">See more informations</a>
              </div>
              <div class="col-lg-6">
                <div id="carouselExampleControls{{i}}" class="carousel slide">
                  <div class="carousel-inner">
                    <div class="carousel-item active">
                      <img class="d-block w-100" src="{{asset('uploads/universities/photos/'~university.photo)}}" alt="First slide">
                    </div>
                    {#}
                    <div class="carousel-item">
                      <img class="d-block w-100" src="{{asset('assetss/img/fabien-bazanegue.jpg')}}" alt="Second slide">
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="{{asset('assetss/img/mark-finn.jpg')}}" alt="Third slide">
                    </div>
                  </div>
                  <a class="carousel-control-prev" href="#carouselExampleControls{{i}}" role="button" data-slide="prev">
                    <i class="tim-icons icon-minimal-left"></i>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselExampleControls{{i}}" role="button" data-slide="next">
                    <i class="tim-icons icon-minimal-right"></i>
                    <span class="sr-only">Next</span>
                  </a>#}
                </div>
              </div>
              
            </div>
          </div>
        </div>
          {% set i=i+1 %}
 {% endfor %}
</div>
</div>

 <section class="section section-lg">
      <img src="{{asset('assetss/img/path4.png')}}" class="path">
      
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-12">
            <h1 class="text-center inline-photo show-on-scroll">All Universities</h1>
            <div class="row row-grid justify-content-center">
            
            </div>
          </div>
        </div>
      </div>
 </section>

        <form  class="navbar-search navbar-search-dark form-inline mr-6 d-none d-md-flex ml-lg-auto">
              <div style=" border-radius: 30px;" class="form-group mb-3">
             <div class="input-group input-group-alternative">
              <div  class="input-group-prepend">
                <span class="input-group-text"><i class="fas fa-search text-light"></i></span>
              </div>
              <input  class="form-control  show-on-scroll " id="myInput" placeholder="Search.." type="text" border="1px light">
            </div>
            </div>
</form>
      
    {% for message in app.flashes('success') %}
            <div class="alert alert-success">
                {{ message }}
            </div>
        {% endfor %}
          {% for message in app.flashes('delete') %}
            <div class="alert alert-danger">
                {{ message }}
            </div>
        {% endfor %}
          {% for message in app.flashes('update') %}
           
          
            <div class="alert alert-warning" role="alert">
                {{ message }}
                </div>   
                {% endfor %} 

<div class="wrapper">
    <div class="page-header">
      <img src="{{asset('assetss/img/blob.png')}}" class="path">
      <img src="../assets/img/path2.png" class="path2">
      <img src="../assets/img/triunghiuri.png" class="shapes triangle">
      <img src="../assets/img/waves.png" class="shapes wave">
      <img src="../assets/img/patrat.png" class="shapes squares">
      <img src="../assets/img/cercuri.png" class="shapes circle">
      


 {% set i=0 %}
 {% set find= false %}

<table>
<tbody id="myTable">

<tr>
{% set i=0 %}
{% for university in universities %}

{% set i=i+1 %}
{% if i==4 %}
</tr><tr>
{% set i=0 %}

{% endif %}

            <td >
            
            <div class="card inline-photo show-on-scroll " style="min-height: 400px;min-width:80px; margin-right:20px; width: 18rem; background-image: linear-gradient(to right top, #ffffff, #ffffff, #ffffff, #ffffff, #ffffff, #ffffff, #ffffff, #ffffff, #ffffff, #ffffff, #ffffff, #ffffff);">
           
            {% if university.photo == null %}
            
  <img style="height:267px;"  class="card-img-top" src="{{ asset('img/flat4.jpg') }}" alt="Card image cap">
    {% else %}
     <img style="height:267px;" class="card-img-top" src="{{ asset('uploads/universities/photos/'~university.photo) }}" alt="Card image cap">
    {% endif %}
    
  <div style="min-height:120;max-height:120px;" class="card-body " >
    <h5 class="card-title text-black" style="color:red;" >{{ university.title }}</h5>
     <div class="show-hide-text">
     <style>.text { text-overflow: "---"; }</style>
    <p  class="" style="color:#676262; height: 100px; overflow: hidden;">{{ university.description}}.</p>
  
  </div>
     <a href="{{path('university_show',{'id':university.id})}}"  class="btn btn-info btn-sm">Show more</a>
    <a href"#" data-toggle="modal" data-target="#exampleModal{{ university.id }}" class=" btn btn-success btn-sm">apply</a>

  </div>
</div>
<!--Modal apply -->
<div class="modal fade" id="exampleModal{{ university.id }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
   <form action="{{path('application_new')}}" method="post">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Apply to {{ university.title }}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      <label class="text-muted">University:</label>
            <input  name="univer" class="form-control " type="text" style="color:#051937;"value="{{ university.title }}" hidden="true"/>
    <label class="text-muted">Email:</label>
            <input  name="email" class="form-control "style="color:#051937;" type="email" />
            <label class="text-muted">Password:</label>
            <input name="pass" class="form-control "style="color:#051937;" type="text" />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
         <button type="submit" class="btn btn-primary">{{ button_label|default('Apply') }}</button>
            
      </div>
    </div>
    </form>
  </div>
</div>
<style>
.show-hide-text {
  display: flex;
  flex-wrap: wrap;
}

.show-hide-text a {
  order: 2;
}

.show-hide-text p {
  position: relative;
  overflow: hidden;
  max-height: 50px; // The Height of 3 rows
  text-overflow: ellipsis;

}

.show-hide-text p {
  display: -webkit-box;
  -webkit-line-clamp: 3; // 3 Rows of text
  -webkit-box-orient: vertical;

}

.show-less {
  display: none;
}

.show-less:target {
  display: block;
}

.show-less:target ~ p {
  display: block;
  max-height: 100%;
}

.show-less:target + a {
  display: none;
}
</style>
{#
                     <h5 class="card-title text-uppercase text-white mb-0">{{ university.title }}</h5>
                      <span class="h3 font-weight-bold mb-0">Students:{{ university.studentsnumber}}</span>
                    </div>
                    <div class="col-auto">
                      <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                        
                        {% if university.photo == null %}
                                <img src="{{ asset('img/univer.png') }}"  width="80px" height="80px  "onmouseover="bigImg(this)" onmouseout="normalImg(this)"  />
                            {% else %}
                                <img src="{{ asset('uploads/universities/photos/'~university.photo) }}"  width="80px" height="80px " onmouseover="bigImg(this)" onmouseout="normalImg(this)" class="rounded-circle" width="50px" height="50px "  />
                            {% endif %}
                        
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-muted text-sm">
                    <span style="  text-shadow: 2px 2px 8px #f8ff90; " class=" h4 text-success mr-2 text-solid">Rank: {{ university.rank}}</span>
                   
                  </p>
                   <button class="btn btn-outline-secondary btn-sm" type="button" data-toggle="collapse" data-target="#{{ university.title }}" aria-expanded="false" aria-controls="collapseExample">
  <i class="ni ni-ui-04 text-info"></i>  Need financial aid
  </button>
  <div class="collapse" id="{{ university.title }}">
  <div class="custom-control custom-control-alternative custom-checkbox mb-3">
  <input class="custom-control-input" id="customCheck5" type="checkbox">
  <label class="custom-control-label" for="customCheck5">financial aid</label>
</div>
  </div>
  <div>
                     <a href="#" class=" btn btn-outline-success btn-sm float-right">apply</a>
                    <a href="{{ path('university_show', { 'id': university.id }) }}" class=" btn btn-outline-danger btn-sm float-right">more informations</a>
    </div>
                </div>
                
              </div>
        #}
            
            </td>
 

       
{% endfor %}

</tbody>
    </table>



  

  <script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>

<script>
function bigImg(x) {
  x.style.height = "150px";
  x.style.width = "150px";
}

function normalImg(x) {
  x.style.height = "80px";
  x.style.width = "80px";
}
</script>

<style>
.inline-photo {
  
   box-shadow: 1em 1em 2em .25em rgba(0,0,0,.2);
  margin: 2em auto;
  opacity: 0;
  transform: translateY(4em) rotateZ(0deg);
  transition: transform 4s .25s cubic-bezier(0,1,.3,1),
              opacity .3s .25s ease-out;
  max-width: 600px;
  width: 90%;
  will-change: transform, opacity;
}
.inline-photo.is-visible {
  opacity: 1;
  transform: rotateZ(0deg);
}
</style>

<script>
// Detect request animation frame
var scroll = window.requestAnimationFrame ||
             // IE Fallback
             function(callback){ window.setTimeout(callback, 1000/60)};
var elementsToShow = document.querySelectorAll('.show-on-scroll'); 

function loop() {

    Array.prototype.forEach.call(elementsToShow, function(element){
      if (isElementInViewport(element)) {
        element.classList.add('is-visible');
      } else {
        element.classList.remove('is-visible');
      }
    });

    scroll(loop);
}

// Call the loop for the first time
loop();

// Helper function from: http://stackoverflow.com/a/7557433/274826
function isElementInViewport(el) {
  // special bonus for those using jQuery
  if (typeof jQuery === "function" && el instanceof jQuery) {
    el = el[0];
  }
  var rect = el.getBoundingClientRect();
  return (
    (rect.top <= 0
      && rect.bottom >= 0)
    ||
    (rect.bottom >= (window.innerHeight || document.documentElement.clientHeight) &&
      rect.top <= (window.innerHeight || document.documentElement.clientHeight))
    ||
    (rect.top >= 0 &&
      rect.bottom <= (window.innerHeight || document.documentElement.clientHeight))
  );
}
</script>
{% endblock %}